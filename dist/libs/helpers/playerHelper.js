Object.defineProperty(exports,"__esModule",{value:true});exports.playerHelper=undefined;var _extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source){if(Object.prototype.hasOwnProperty.call(source,key)){target[key]=source[key];}}}return target;};var _randomizer=require('../generator/randomizer');var MIN_MORALE=0;var MAX_MORALE=100;var PRICE_MULTIPLIER=1000000;var MIN_PRICE=0.01;var MIN_WAGE=10000;var playerHelper={updateStatus:function updateStatus(player){var modifiers=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};var morale=player.status.morale;var increases=modifiers.increases,decreases=modifiers.decreases;if(increases&&increases.length){increases.forEach(function(mod){morale=_randomizer.randomizer.chance(mod.chance)?morale+mod.value:morale+0;});}if(decreases&&decreases.length){decreases.forEach(function(mod){morale=_randomizer.randomizer.chance(mod.chance)?morale-mod.value:morale+0;});}morale=morale<MIN_MORALE?MIN_MORALE:morale;morale=morale>MAX_MORALE?MAX_MORALE:morale;morale=Math.round(morale);return _extends({},player,{status:_extends({},player.status,{morale:morale})});},calculateValue:function calculateValue(player){var price=this.basePriceOnSkill(player.skill);price=price*(1+this.agePriceModifier(player.age));price+=_randomizer.randomizer.int(1,3);price-=_randomizer.randomizer.int(1,3);if(player.position==='S'){price+=_randomizer.randomizer.chance(player.skill)?_randomizer.randomizer.int(1,3):0;}if(price<0){price=MIN_PRICE;}price+=_randomizer.randomizer.int(0,9)/10;return Math.round(price*PRICE_MULTIPLIER);},basePriceOnSkill:function basePriceOnSkill(skill){if(skill>98)return 130;if(skill>90)return 80;if(skill>80)return 50;if(skill>76)return 20;if(skill>70)return 10;if(skill>60)return 5;if(skill>50)return 2;return 0.5;},agePriceModifier:function agePriceModifier(age){if(age>34)return-0.82;if(age>32)return-0.54;if(age>30)return-0.25;if(age>28)return 0.235;if(age>26)return 0.134;if(age>22)return 0.21;if(age>20)return-0.31;return 0.5;},calculateWage:function calculateWage(player){var value=player.value,age=player.age;var modifiedValue=value*(1+this.agePriceModifier(age));var wage=Math.round(modifiedValue*(_randomizer.randomizer.int(1,10)/100));if(wage<=MIN_WAGE){wage=_randomizer.randomizer.int(8,70)*1000+_randomizer.randomizer.int(100,500);}return wage;}};exports.playerHelper=playerHelper;