Object.defineProperty(exports,"__esModule",{value:true});exports.match=undefined;var _helpers=require('../helpers');var _randomizer=require('../generator/randomizer');var match={simulate:function simulate(homeTeam,awayTeam){var homeGoal=0;var awayGoal=0;var isDraw=false;var winner=homeTeam.name;var loser=awayTeam.name;var homePoint=this.points(homeTeam);var awayPoint=this.points(awayTeam);if(_randomizer.randomizer.chance(80)){if(homePoint-awayPoint<0){awayGoal=Math.round((awayPoint-homePoint)%6);homeGoal+=this.fluke();awayGoal+=this.fluke();homeGoal+=this.bonusHome();}else{homeGoal=Math.round((homePoint-awayPoint)%6);awayGoal+=this.fluke();homeGoal+=this.fluke();}}else{homeGoal+=this.fluke();awayGoal+=this.fluke();homeGoal+=this.bonusHome();}homeGoal+=this.bonusAge(homeTeam);awayGoal+=this.bonusAge(awayTeam);if(_helpers.teamHelper.isOffensive(homeTeam)){homeGoal+=_randomizer.randomizer.chance(50)?_randomizer.randomizer.int(1,2):0;awayGoal+=_randomizer.randomizer.chance(20)?1:0;}if(_helpers.teamHelper.isOffensive(awayTeam)){awayGoal+=_randomizer.randomizer.chance(50)?_randomizer.randomizer.int(1,2):0;homeGoal+=_randomizer.randomizer.chance(20)?1:0;}if(_helpers.teamHelper.isDefensive(homeTeam)){homeGoal-=_randomizer.randomizer.chance(50)?1:0;}if(_helpers.teamHelper.isDefensive(awayTeam)){awayGoal-=_randomizer.randomizer.chance(50)?1:0;}homeGoal=homeGoal<0?0:homeGoal;awayGoal=awayGoal<0?0:awayGoal;if(homeGoal<awayTeam){loser=homeTeam.name;winner=awayTeam.name;}if(homeGoal===awayGoal){isDraw=true;}var scorers=this.scorers(homeTeam,awayTeam,homeGoal,awayGoal);return{home:homeTeam.name,away:awayTeam.name,winner:winner,loser:loser,isDraw:isDraw,homeGoal:homeGoal,awayGoal:awayGoal,scorers:scorers};},points:function points(team){var points=_helpers.teamHelper.averageSkill(team);points+=this.malusModule(_helpers.teamHelper.canPlayModule(team));return points;},scorers:function scorers(homeTeam,awayTeam,homeGoal,awayGoal){var home=_helpers.teamHelper.scorers(homeTeam,homeGoal);var away=_helpers.teamHelper.scorers(awayTeam,awayGoal);return{home:home,away:away};},bonusAge:function bonusAge(team){var avgAge=_helpers.teamHelper.averageAge(team);if(avgAge<23||avgAge>33){return this.fluke();}return 0;},bonusHome:function bonusHome(){return _randomizer.randomizer.chance(66)?1:0;},malusModule:function malusModule(teamCanPlay){var modifier=_randomizer.randomizer.int(1,10);if(!teamCanPlay){return-1*modifier;}return modifier;},fluke:function fluke(){return _randomizer.randomizer.int(0,3);}};exports.match=match;